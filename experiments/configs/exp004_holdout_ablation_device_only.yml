description: "CTFusion device(GPU)のベクトルのみを使用した提案手法の基本性能をHardwareによる新しいGPUをテストデータとして評価する"

# --- データ関連の設定 ---
data:
  # 使用する処理済みデータセットのパス
  dataset_path: "data/02_processed/stgc_dataset.csv"
  # ターゲット変数
  target_col: "total_time_ms"

# --- 特徴量関連の設定 ---
features:
  # # Host性能の特徴量カラム
  # host_cols:
  #   - "host_compute_Image_Preprocessing_Rate_peak_host_throughput"
  #   - "host_compute_Image_Preprocessing_Rate_single_worker_throughput"
  #   - "host_compute_Image_Preprocessing_Rate_scalability_factor"

  # # Transfer性能の特徴量カラム
  # transfer_cols:
  #   - "data_transfer_D2H_PCIe_peak_bandwidth_gbps"
  #   - "data_transfer_D2H_PCIe_small_transfer_latency_ms"
  #   - "data_transfer_D2H_DMA_peak_bandwidth_gbps"
  #   - "data_transfer_D2H_DMA_small_transfer_latency_ms"
  #   - "data_transfer_H2D_PCIe_peak_bandwidth_gbps"
  #   - "data_transfer_H2D_PCIe_small_transfer_latency_ms"
  #   - "data_transfer_H2D_DMA_peak_bandwidth_gbps"
  #   - "data_transfer_H2D_DMA_small_transfer_latency_ms"

  # Device性能の特徴量カラム
  device_cols:
    - "device_virtual_cnn_block_latency_fp32"
    - "device_virtual_cnn_block_latency_fp16"
    - "device_virtual_transformer_block_latency_fp32"
    - "device_virtual_transformer_block_latency_fp16"

  # タスクの特徴量カラム
  task_cols:
    # モデルの要求量
    - "model_flops_g"
    - "model_memory_mb"
    - "num_attention"
    - "num_batchnorm2d"
    - "num_conv2d"
    - "num_gelu"
    - "num_layernorm"
    - "num_linear"
    - "num_relu"
    - "num_silu"

    # データの要求量
    - "batch_size"
    - "total_frames"
    - "im_height"
    - "im_width"

    # - "interact_compute_to_memory_ratio"
    # - "interact_memory_to_cache_pressure_ratio"
    # - "interact_data_to_pcie_demand_ratio"
    # - "interact_host_to_gpu_balance_ratio_dynamic"

# --- 検証方法の設定 ---
validation:
  strategy: "holdout"

  # グループ分けに使うカラム
  group_by_col: "system_id"

  # テストセットとして固定するグループのリストを新設
  test_groups:
    - "intel_xeon_gold_6330__nvidia_a100_pcie_40gb"
    - "intel_core_i5_13th_gen__nvidia_geforce_rtx_4070"
    - "intel_core_i7_13th_gen__nvidia_geforce_rtx_4070"
    - "intel_core_i7_9th_gen__nvidia_geforce_rtx_4070"
    - "intel_xeon_gold_5122__nvidia_geforce_rtx_4070"

# --- モデルの設定 ---
model:
  name: "lightgbm"
  params:
    objective: "regression_l1"
    metric: "mape"
    n_estimators: 10000
    learning_rate: 0.1
    seed: 42
    n_jobs: -1
    importance_type: "gain"

    num_leaves: 15 # 木の複雑さ
    feature_fraction: 0.7 # 特徴量をランダムにサンプリング
    bagging_fraction: 0.7 # データをランダムにサンプリング

# --- Root出力先 ---
output_dir: "experiments/outputs/"
